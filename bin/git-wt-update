#!/usr/bin/env bash
set -euo pipefail

if [ $# -ne 1 ]; then
    echo "Usage: $0 <version>"
    echo "Example: $0 0.30.0"
    exit 1
fi

VERSION="$1"
TAG="v${VERSION}"
ARCHIVE="git-wt_${TAG}_linux_amd64.tar.gz"
URL="https://github.com/k1LoW/git-wt/releases/download/${TAG}/${ARCHIVE}"

BIN_ORIG="git-wt"
INSTALL_PATH="/usr/local/bin/git-wt"

echo "Downloading git-wt v${VERSION}..."
wget -q "${URL}"

echo "Extracting..."
tar -zxf "${ARCHIVE}"

echo "Installing to ${INSTALL_PATH}..."
sudo mv "${BIN_ORIG}" "${INSTALL_PATH}"

echo "Cleaning up..."
rm "${ARCHIVE}"

echo "Installed git-wt version:"
git-wt -v
